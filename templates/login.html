<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>๋ก๊ทธ์ธ</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body class="auth-bg">
<div class="auth-container">
    <h1>๐ ์์ ๊ด๋ฆฌ ์์คํ</h1>
    <div class="error" id="error"></div>
    <div class="form-group">
        <label>์์ด๋</label>
        <input type="text" id="userId" placeholder="์์ด๋ ์๋ฅ">
    </div>
    <div class="form-group">
        <label>๋น๋ฐ๋ฒํธ</label>
        <input type="password" id="password" placeholder="๋น๋ฐ๋ฒํธ ์๋ฅ">
    </div>
    <button class="auth-btn auth-btn-primary" onclick="doLogin()">๋ก๊ทธ์ธ</button>
    <button class="auth-btn auth-btn-secondary" onclick="location.href='/register'">ํ์๊ฐ์</button>
    <p class="notice">๋ฌธ์: ์นด์นด์คํก odong4444</p>
</div>
<script>
async function doLogin() {
    const u = document.getElementById('userId').value;
    const p = document.getElementById('password').value;
    const e = document.getElementById('error');
    
    if (!u || !p) {
        e.textContent = '์์ด๋์ ๋น๋ฐ๋ฒํธ๋ฅผ ์๋ฅํด์ฃผ์ธ์.';
        e.style.display = 'block';
        return;
    }
    
    try {
        const r = await fetch('/api/login', {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({userId: u, password: p})
        });
        const d = await r.json();
        if (d.success) {
            location.href = '/dashboard';
        } else {
            e.textContent = d.message;
            e.style.display = 'block';
        }
    } catch(x) {
        e.textContent = '์๋ฒ ์ฐ๊ฒฐ ์คํจ';
        e.style.display = 'block';
    }
}

document.getElementById('password').addEventListener('keypress', e => {
    if (e.key === 'Enter') doLogin();
});
</script>
</body>
</html>
